{% extends 'base.html' %}
{% load static %}

{% block title %}
Главная страница
{% endblock %}

{% block content %}
{% for post in posts %}
<div class="mb-5 border border-2" style="width: 800px;">
    <div>
        {% if post.author.avatar %}
            <img class="border border-2 rounded-circle" src="{{ post.author.avatar.url }}" alt="image" height="30" width="30">
        {% else %}
            <img class="border border-2 rounded-circle" src="{% static 'img/placeholder.png' %}" alt="image" height="23" width="23">
        {%endif%}   
        <a href="{% url 'account_detail' post.author.username %}">
            <b>{{ post.author }}</b>
        </a>
        

    </div>
    <div>
        {% if post.image %}
            <img class="border border-2" src="{{ post.image.url }}" alt="image" height="400" width="700">
        {% else %}
            <img class="border border-2 rounded-circle" src="{% static 'img/placeholder.png' %}" alt="image" height="400" width="700">
        {%endif%}       
    </div>
    <div>
        <a href="#"><img src="{% static 'icon/icon-heart.png' %}" alt="heart" height="25" width="25"></a>
        <a href="#"><img src="{% static 'icon/icon-comm.png' %}" alt="heart" height="35" width="35"></a>
    </div>    
        <p>{{ post.liked_users.all.count }} отметок "Нравится"</p>
    <div>
        <b>@{{ post.author }}</b>
        <p  style="width: 800px;">
            {{ post.description }}
        </p>
    </div>

{% if user.is_authenticated %}
    <form class="d-flex" action="{% url 'post_comment_add' post.pk %}" method='POST'>
        {% csrf_token %}

         <div class="">

            {{ comment_form.as_p }}

            {% comment %} <textarea placeholder="Добавьте комментарий..." class="" autocomplete="off" autocorrect="off" style="width: 630px; height: 25px !important;"></textarea> {% endcomment %}
            <button class=""type="submit">Опубликовать</button>
            
        </div>
    </form>    
{% endif %}

    {% for comment in post.comments.all %}
        {{ comment.author }}
        {{ comment.created_at }}
        {{ comment.text }}
    {% endfor %}
    количество комментариев {{ post.comments.all.count }}
        
</div>
{% endfor %}



{% endblock %}